[gd_scene load_steps=20 format=3 uid="uid://c1atfoes4lbje"]

[ext_resource type="Material" uid="uid://b3ura2y85w4bj" path="res://Assets/Spells/FireBolt/Bolt_Rune.tres" id="1_cdefk"]
[ext_resource type="ArrayMesh" uid="uid://ch56pubg40pr2" path="res://Assets/3d_models/RunesShape/Projectile.obj" id="2_uy7rx"]
[ext_resource type="Shader" uid="uid://dji13yukvuv5e" path="res://Assets/Spells/FireBolt/BoltHeader_Rune.tres" id="3_idkq4"]
[ext_resource type="Shader" uid="uid://b3pe55cid6sds" path="res://Assets/Spells/FireBolt/TrailBolt_Rune.tres" id="4_njhi0"]
[ext_resource type="Script" path="res://Assets/Spells/FireBolt/TrailMesh.cs" id="5_np3ck"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_7sv4t"]
render_priority = 0
shader = ExtResource("3_idkq4")
shader_parameter/ColorParameter = Color(0.941074, 0.640125, 0, 1)
shader_parameter/Fresnel_Power = 10.0

[sub_resource type="SphereMesh" id="SphereMesh_i5nxf"]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_vgv46"]
points = PackedVector3Array(0.457871, 0.198079, 0.0157824, -0.48874, -0.0916874, -0.0451868, -0.471509, -0.137027, -0.0907015, 0.0763591, -0.333275, 0.364179, 0.136569, -0.332425, -0.346906, -0.151617, 0.471982, -0.0602459, -0.105347, 0.211936, 0.43966, -0.0450169, 0.198098, -0.456416, 0.409077, -0.151168, 0.242516, -0.271376, -0.377761, 0.181871, 0.41148, -0.075981, -0.27324, 0.198197, -0.456161, -0.044931, -0.240641, -0.331674, -0.285768, 0.227137, 0.25672, 0.363041, 0.227522, 0.423604, -0.135488, -0.37899, 0.0607022, 0.319462, -0.406747, 0.181049, -0.225691, -0.0146313, -0.0917695, 0.490229, -0.377855, 0.302793, 0.121712, 0.0462323, 0.456011, 0.198185, -0.227464, -0.0607863, -0.440348, 0.228455, 0.0607228, -0.439887, -0.0911376, -0.489246, -0.045174, 0.441865, -0.228216, -0.0449581, 0.317179, 0.241214, -0.300812, -0.0448487, 0.394737, -0.302955, -0.316348, -0.196222, 0.332551, 0.198442, -0.0304293, 0.457237, 0.0614714, -0.152246, -0.471307, 0.363089, 0.256708, 0.227079, 0.152134, -0.439489, 0.182379, -0.210725, 0.362276, 0.27223)

[sub_resource type="Gradient" id="Gradient_1kkq4"]
offsets = PackedFloat32Array(0.378947, 0.594737, 1)
colors = PackedColorArray(1, 0.283333, 0, 1, 1, 0.05, 0.05, 1, 0.0352941, 0.0352941, 0.0352941, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_gxmwn"]
gradient = SubResource("Gradient_1kkq4")
use_hdr = true

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rexff"]
render_priority = 0
shader = ExtResource("4_njhi0")
shader_parameter/Trail_Speed = Vector2(-1, 0)
shader_parameter/Color_Texture = SubResource("GradientTexture1D_gxmwn")

[sub_resource type="QuadMesh" id="QuadMesh_agy4v"]
subdivide_width = 10

[sub_resource type="Gradient" id="Gradient_t86p3"]
offsets = PackedFloat32Array(0, 0.268421, 0.615789)
colors = PackedColorArray(1, 1, 1, 1, 1, 1, 1, 1, 0.0421053, 0.0421053, 0.0421053, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_ib3xm"]
gradient = SubResource("Gradient_t86p3")
fill = 1
fill_from = Vector2(0.5, 0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_dve0u"]
blend_mode = 1
cull_mode = 2
shading_mode = 0
disable_ambient_light = true
disable_fog = true
vertex_color_use_as_albedo = true
vertex_color_is_srgb = true
albedo_texture = SubResource("GradientTexture2D_ib3xm")

[sub_resource type="Curve" id="Curve_s6qlk"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_omiln"]
curve = SubResource("Curve_s6qlk")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_barhi"]
particle_flag_align_y = true
emission_shape = 1
emission_sphere_radius = 0.33
spread = 0.0
initial_velocity_min = 3.0
initial_velocity_max = 8.0
radial_velocity_min = 0.999978
radial_velocity_max = 1.99998
gravity = Vector3(0, 0, 0)
scale_max = 2.0
scale_curve = SubResource("CurveTexture_omiln")
color = Color(4, 1.3, 0.5, 1)

[sub_resource type="QuadMesh" id="QuadMesh_3l1xd"]
size = Vector2(0.025, 0.1)

[node name="VFX_BoltRune" type="Node3D"]

[node name="BoltMesh" type="MeshInstance3D" parent="."]
transform = Transform3D(-0.5, 0, -5.02816e-08, 0, 0.333, 0, 7.54979e-08, 0, -0.333, 0, 0, 0)
material_override = ExtResource("1_cdefk")
gi_mode = 2
mesh = ExtResource("2_uy7rx")

[node name="BoltHeader" type="MeshInstance3D" parent="."]
transform = Transform3D(-0.55, 0, -8.30477e-08, 0, 0.55, 0, 8.30477e-08, 0, -0.55, -0.288373, 0, 2.52975e-08)
material_override = SubResource("ShaderMaterial_7sv4t")
mesh = SubResource("SphereMesh_i5nxf")
skeleton = NodePath("../BoltMesh")

[node name="StaticBody3D" type="StaticBody3D" parent="BoltHeader"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="BoltHeader/StaticBody3D"]
shape = SubResource("ConvexPolygonShape3D_vgv46")

[node name="TrailMesh" type="MeshInstance3D" parent="."]
transform = Transform3D(2.705, 0, 0, 0, 0.575, 0, 0, 0, 1, 0.981, 0, 0)
material_override = SubResource("ShaderMaterial_rexff")
mesh = SubResource("QuadMesh_agy4v")
script = ExtResource("5_np3ck")

[node name="Sparks" type="GPUParticles3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.510746, -0.00212717, 0.000949502)
material_override = SubResource("StandardMaterial3D_dve0u")
amount = 10
lifetime = 0.3
explosiveness = 0.4
process_material = SubResource("ParticleProcessMaterial_barhi")
draw_pass_1 = SubResource("QuadMesh_3l1xd")
